{% extends "base.html" %}
{% load static %}

{% block seo %}
<title>–ù–æ–≤–æ—Å—Ç–∏ - Healthcare</title>
{% endblock seo %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/news.css' %}" />
{% endblock styles %}

{% block content %}
<div class="news-page">
    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <section class="filters-section">
        <form action="" id="filter_form" method="get">
            <h3>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</h3>
            <div class="category_wrapper">
                <label>
                    <input type="radio" name="category" value="" class="radio_inputs" {% if not filter_category %}checked{% endif %}>
                    –í—Å–µ
                </label>
                {% for category in categories %}
                <label>
                    <input type="radio" name="category" class="radio_inputs" value="{{ category.slug }}" {% if filter_category == category.slug %}checked{% endif %}>
                    {{ category.name }}
                </label>
                {% endfor %}
            </div>
            
            <h3>üè∑Ô∏è –¢–µ–≥–∏:</h3>
            <div class="tag_wrapper">
                {% for tag in tags %}
                <label>
                    <input type="checkbox" name="tags" class="checkbox_inputs" value="{{ tag.slug }}" {% if tag.slug in filter_tags %}checked{% endif %}>
                    {{ tag.name }}
                </label>
                {% endfor %}
            </div>
        </form>
    </section>

    <!-- –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π -->
    {% if news %}
    <div class="news-grid">
        {% for news_item in news %}
        <a href="{% url 'news_detail' news_item.slug %}" class="news-card">
            <div class="news-card-image">
                {% if news_item.image %}
                    <img src="{{ news_item.image.url }}" alt="{{ news_item.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                {% else %}
                    üì∞
                {% endif %}
            </div>
            <div class="news-card-content">
                <h2 class="news-card-title">{{ news_item.name }}</h2>
                <div class="news-card-description">
                    {{ news_item.description|safe|truncatewords:20 }}
                </div>
                <div class="news-card-footer">
                    {% if news_item.is_good %}
                    <span class="news-card-badge">–ü–æ–ø—É–ª—è—Ä–Ω–æ</span>
                    {% else %}
                    <span></span>
                    {% endif %}
                    {% if news_item.category %}
                    <span class="news-card-meta">{{ news_item.category.name }}</span>
                    {% endif %}
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="news-empty">
        <div class="news-empty-icon">üì≠</div>
        <h3>–ù–æ–≤–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ–∑–∂–µ</p>
    </div>
    {% endif %}

    <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
    {% include 'pagination.html' %}
</div>

<script>
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('filter_form');
        const radioInputs = document.querySelectorAll('.radio_inputs');
        const checkboxInputs = document.querySelectorAll('.checkbox_inputs');
        
        radioInputs.forEach(radio => {
            radio.addEventListener('change', () => form.submit());
        });
        
        checkboxInputs.forEach(checkbox => {
            checkbox.addEventListener('change', () => form.submit());
        });
    });
</script>
{% endblock content %}